"use strict";var evnt={addEvent:function(a,b,c){"undefined"!=typeof addEventListener?a.addEventListener(b,c,!1):"undefined"!=typeof attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},removeEvent:function(a,b,c){"undefined"!=typeof addEventListener?a.removeEventListener(b,c,!1):"undefined"!=typeof detachEvent?a.attachEvent("on"+b,c):a["on"+b]=null},getTarget:function(a){return"undefined"!=typeof a.target?a.target:a.srcElement},preventDefault:function(a){"undefined"!=typeof a.preventDefault?a.preventDefault():a.returnValue=!1}},player;player=function(a){function b(a){var b=Math.ceil(Math.random()*Math.pow(10,a));return b}function c(a,b){for(var d in b)b[d]&&b[d].constructor&&b[d].constructor===Object?(a[d]=a[d]||{},c(a[d],b[d])):a[d]=b[d];return a}function d(a,b){return 0===a||0===b||isNaN(a)||isNaN(b)?0:(a/b*100).toFixed(2)}function e(a,b,c){return a.replace(new RegExp(b.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),c)}function f(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ","");a.className=d+(c?" "+b:"")}}function g(a,b,c,d){if(b=b.split(" "),a instanceof NodeList)for(var e=0;e<a.length;e++)a[e]instanceof Node&&g(a[e],arguments[1],arguments[2],arguments[3]);else for(var f=0;f<b.length;f++)a[d?"addEventListener":"removeEventListener"](b[f],c,!1)}function h(a,b,c){a&&g(a,b,c,!0)}function i(){var a={supported:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}()};return a}function j(a){function b(a){var b=document.createElement("button"),c=document.createElement("span");return b.type="button",b.className=o.buttonClass+" "+o.buttonComponents[a],c.className=o.screenReaderClass,c.textContent=o.alt[a]+("rewind"==a||"forward"==a?" на "+o.seekTime+"c.":""),b.setAttribute("title",o.buttonComponents[a]),b.appendChild(c),j.cash[a]=b,b}function c(){var a=document.createElement("div"),b=document.createElement("progress"),c=document.createElement("progress"),d=document.createElement("input"),e=document.createElement("label");return a.className=o.seekerComponents.container,c.value=b.value=d.value="0",c.max=b.max=d.max="100",b.className=o.seekerComponents.buffer,b.appendChild(document.createElement("span")),b.appendChild(document.createTextNode(o.alt.buffered)),c.className=o.seekerComponents.played,c.appendChild(document.createElement("span")),c.appendChild(document.createTextNode(o.alt.played)),e.className=o.screenReaderClass,e.htmlFor=d.id="seeForlocalID",e.textContent=o.alt.seek,d.className=o.seekerComponents.seek,d.min="0",d.type="range",d.step="0.5",a.appendChild(e),a.appendChild(d),a.appendChild(c),a.appendChild(b),j.cash.seeker=a,a}function d(a){var b=document.createElement("div"),c=document.createElement("span"),d=document.createElement("span");return c.className=o.screenReaderClass,c.textContent=o.alt[a],d.textContent="00:00",d.className=o.durationComponents[a],b.className=o.durationComponents.timeContainer,b.appendChild(c),b.appendChild(d),j.cash[a]=b,b}function e(){var a=document.createDocumentFragment(),b=document.createElement("label"),c=document.createElement("input"),d=document.createElement("span");return c.className=o.screenReaderClass+" "+o.volumeComponents.inputMute,c.type="checkbox",b.htmlFor=c.id="mutedForlocalID",b.className=o.buttonClass+" "+o.volumeComponents.labelMute,d.textContent=o.alt.muted,d.className=o.screenReaderClass,b.appendChild(d),a.appendChild(c),a.appendChild(b),j.cash.mute=a,a}function f(){var a=document.createDocumentFragment(),b=document.createElement("label"),c=document.createElement("input");return b.className=o.screenReaderClass,b.htmlFor=c.id="volumeForlocalID",b.textContent=o.alt.setVolume,c.className=o.volumeComponents.inputVolume,c.min="0",c.max="10",c.type="range",c.step="0.5",a.appendChild(b),a.appendChild(c),j.cash.volume=a,a}function g(){var a=document.createElement("object");return a.setAttribute("type","image/svg+xml"),a}if(a in j.cash)return j.cash[a];var h=document.createElement("div");switch(h.className="player-controls",a){case"play":case"restart":case"rewind":case"forward":return b(a);case"seeker":return c();case"mute":return e();case"volume":return f();case"timeCurrent":case"timeDuration":return d(a);case"amp":return g();default:return!1}}function k(a){function c(a){return I.container.querySelector("."+a)}function g(){o.syncedPlayers||(n=I.container.id,m=I),n&&n===I.container.id?I.media.paused?I.media.play():I.media.pause():n&&n!==I.container.id?(m.media.paused||m.media.pause(),I.media.play()):I.media.play(),o.syncedPlayers&&(n=I.container.id,m=I)}function k(){f(I.container,o.stateClassFor.playing,!I.media.paused),f(I.container,o.stateClassFor.paused,I.media.paused)}function q(){f(I.container,o.stateClassFor.paused,!1),f(I.container,o.stateClassFor.ended,I.media.paused),t()}function r(){t(I.media.currentTime-o.seekTime)}function s(){t(I.media.currentTime+o.seekTime)}function t(a){var b=0;"number"==typeof a?b=a:"object"!=typeof a||"input"!==a.type&&"change"!==a.type||(b=a.target.value/a.target.max*I.media.duration),0>b?b=0:b>I.media.duration&&(b=I.media.duration),I.media.currentTime=b.toFixed(1)}function u(a){var b=I.diagramm.svg.getBoundingClientRect(),c=parseInt((a.clientX-b.left)/(b.right-b.left)*I.media.duration,10);t(c)}function v(a){var b=I.progress.played.bar,c=I.progress.played.text,e=0;if(a)switch(a.type){case"timeupdate":case"seeking":e=d(I.media.currentTime,I.media.duration),"timeupdate"==a.type&&I.buttons.seek&&(I.buttons.seek.value=e),"timeupdate"==a.type&&I.object&&I.diagramm.rectAmp.setAttribute("width",e+"%");break;case"change":case"input":e=a.target.value;case"playing":case"progress":b=I.progress.buffer.bar,c=I.progress.buffer.text,e=function(){var a=I.media.buffered;return a.length?d(a.end(0),I.media.duration):0}()}b&&(b.value=e),c&&(c.innerHTML=e)}function w(a){var b="waiting"===a.type;clearTimeout(I.loadingTimer),I.loadingTimer=setTimeout(function(){f(I.container,o.stateClassFor.loading,b)},b?250:0)}function x(a,b){if(b){I.secs=parseInt(a%60),I.mins=parseInt(a/60%60),I.hours=parseInt(a/60/60%60);var c=parseInt(I.media.duration/60/60%60)>0;I.secs=("0"+I.secs).slice(-2),I.mins=("0"+I.mins).slice(-2),b.innerHTML=(c?I.hours+":":"")+I.mins+":"+I.secs}}function y(){var a=I.media.duration||0;!I.duration&&I.media.paused&&x(a,I.currentTime),I.duration&&x(a,I.duration)}function z(a){x(I.media.currentTime,I.curTime),v(a)}function A(a){"undefined"==typeof a&&(a=o.storage.enabled&&i().supported?window.localStorage[o.storage.key]||o.volumeLevel:o.volumeLevel),a>10&&(a=10),I.media.volume=parseFloat(a/10),I.volume&&(I.volume.value=a,o.storage.enabled&&i().supported&&window.localStorage.setItem(o.storage.key,a),C(),D(a))}function B(a){"undefined"==typeof a&&(a=!I.media.muted),I.buttons.mute.checked=a,I.media.muted=a,C(),D()}function C(){f(I.container,"muted",0===I.media.volume||I.media.muted)}function D(a){return 0==a?I.buttons.muteLabel.setAttribute("data-volume","volumut"):3>a?I.buttons.muteLabel.setAttribute("data-volume","volumin"):6>a?I.buttons.muteLabel.setAttribute("data-volume","volumid"):I.buttons.muteLabel.setAttribute("data-volume","volumax")}function E(){function a(){for(var a=0;a<h.length;a++){var b=j(h[a]).cloneNode(!0);"amp"!=h[a]?b&&g.appendChild(b):I.container.appendChild(b)}"amp"==I.configuration&&g.appendChild(c("title")),g.innerHTML=e(g.innerHTML,"localID",f)}function d(){var a,b,c,d=document.createElementNS(p,"defs"),e=document.createElementNS(p,"rect"),f=document.createElementNS(p,"clipPath");f.setAttribute("id","cut-off-progress"),e.setAttribute("width","0%"),e.setAttribute("height","100%"),f.appendChild(e),d.appendChild(f),a=I.object.contentDocument.getElementsByTagName("svg")[0],b=a.getElementById("amp"),b.setAttribute("cursor","pointer"),c=b.cloneNode(!0),c.id="progress",c.setAttribute("clip-path","url(#"+f.getAttribute("id")+")"),c.setAttribute("fill",l.colors.main),b.setAttribute("fill",l.colors.unvisible),a.insertBefore(d,b),a.insertBefore(c,b.nextSibling),I.ampState=1}I.configuration=I.container.getAttribute("data-player-config")||"default";var f=b(6),g=document.createElement("div"),h=l.playerCustomConfigs[I.configuration];if(g.className=l.playerBar,a(),I.container.insertBefore(g,I.media.nextSibling),I.container.id=f,I.container.hasAttribute("data-musDiagramm")){var i=I.container.getAttribute("data-musDiagramm");I.container.removeAttribute("data-musDiagramm"),I.object=I.container.getElementsByTagName("object")[0],I.object.setAttribute("data",i),I.object.onload=d}}function F(){function a(){I.diagramm={},I.diagramm.svg=I.object.contentDocument.getElementsByTagName("svg")[0],I.diagramm.allAmp=I.diagramm.svg&&I.diagramm.svg.getElementById("amp"),I.diagramm.progressAmp=I.diagramm.svg&&I.diagramm.svg.getElementById("progress"),I.diagramm.rectAmp=I.diagramm.svg&&I.diagramm.svg.querySelector("defs rect")}I.buttons={},I.buttons.play=c(l.buttonComponents.play),I.buttons.restart=c(l.buttonComponents.restart),I.buttons.rewind=c(l.buttonComponents.rewind),I.buttons.forward=c(l.buttonComponents.forward),I.buttons.mute=c(l.volumeComponents.inputMute),I.buttons.muteLabel=c(l.volumeComponents.labelMute),I.buttons.seek=c(l.seekerComponents.seek),I.duration=c(l.durationComponents.timeDuration),I.curTime=c(l.durationComponents.timeCurrent),I.volume=c(l.volumeComponents.inputVolume),I.progress={},I.progress.container=c(l.seekerComponents.container),I.progress.played={},I.progress.played.bar=c(l.seekerComponents.played),I.progress.played.text=I.progress.played.bar&&I.progress.played.bar.getElementsByTagName("span")[0],I.progress.buffer={},I.progress.buffer.bar=c(l.seekerComponents.buffer),I.progress.buffer.text=I.progress.buffer.bar&&I.progress.buffer.bar.getElementsByTagName("span")[0],I.object&&setTimeout(function b(){1==I.ampState?(a(),I.ampState++):setTimeout(b,300)},300)}function G(){var a="input";h(I.buttons.play,"click",g),I.buttons.rewind&&h(I.buttons.rewind,"click",r),I.buttons.restart&&h(I.buttons.restart,"click",t),I.buttons.forward&&h(I.buttons.forward,"click",s),I.duration&&(h(I.media,"loadedmetadata durationchange",y),setTimeout(y,2e3)),I.buttons.mute&&h(I.buttons.mute,"change",function(){B(this.checked)}),I.buttons.seek&&h(I.buttons.seek,a,t),I.volume&&h(I.volume,a,function(){A(this.value)}),h(I.media,"progress playing",v),h(I.media,"waiting canplay seeked",w),h(I.media,"play pause",k),h(I.media,"timeupdate",z),h(I.media,"seeking",z),h(I.media,"ended",q),"video"===I.type&&h(I.media,"click",g),I.object&&setTimeout(function b(){2==I.ampState?(h(I.diagramm.svg,"click",u),I.ampState++):setTimeout(b,300)},300)}function H(){return I.media=I.container.querySelectorAll("audio, video")[0],I.media?(I.type=I.media.tagName.toLowerCase(),I.media.removeAttribute("controls"),I.media.setAttribute("preload","metadata"),f(I.container,"player-"+I.type,!0),E(),F(),A(),y(),G(),!0):!1}var I=this;I.container=a,H()}var l,m,n,o={player_container:".player",playerBar:"player-controls",buttonClass:"btn",screenReaderClass:"show-for-sr",stateClassFor:{paused:"paused",muted:"muted",playing:"playing",ended:"ended",loading:"loading"},buttonComponents:{restart:"restart",play:"play",rewind:"rewind",forward:"forward"},durationComponents:{timeContainer:"player-time",timeCurrent:"player-current-time",timeDuration:"player-duration"},volumeComponents:{inputVolume:"player-volume",inputMute:"mute",labelMute:"for-mute"},seekerComponents:{container:"player-progress",buffer:"player-progress-buffer",played:"player-progress-played",seek:"player-progress-seek"},seekTime:10,volumeLevel:3,syncedPlayers:!0,storage:{enabled:!0,key:"volumeLevel"},colors:{main:"#512698",second:"#704caa",unvisible:"#665d76"},alt:{play:"Проиграть/Поставить на паузу",restart:"Твоя песня хороша — начинай сначала",rewind:"Перемотать назад",forward:"Перемотать вперед",timeDuration:"Длительность",timeCurrent:"Текущее время",buffered:"% загружено",played:"% проиграно",seek:"Перемотать на: ",setVolume:"Громкость",muted:"Выключить/включить звук"},playerCustomConfigs:{thumb:["play"],amp:["play","amp"],slider:["play","mute","seeker","volume"],video:["seeker","restart","play","rewind","forward","timeCurrent","timeDuration","mute","volume"],"default":["seeker","restart","play","rewind","forward","timeCurrent","timeDuration","mute","volume"]}},p="http://www.w3.org/2000/svg";return j.cash={},a.setup=function(a){var b=document.querySelectorAll(o.player_container);l=c(o,a);for(var d=[],e=b.length-1;e>=0;e--){var f=b[e],g=new k(f);f.player=Object.keys(g).length?g:!1,d.push(f)}return d},a}({}),evnt.addEvent(window,"load",player.setup);