"use strict";var evnt={addEvent:function(a,b,c){"undefined"!=typeof addEventListener?a.addEventListener(b,c,!1):"undefined"!=typeof attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},removeEvent:function(a,b,c){"undefined"!=typeof addEventListener?a.removeEventListener(b,c,!1):"undefined"!=typeof detachEvent?a.attachEvent("on"+b,c):a["on"+b]=null},getTarget:function(a){return"undefined"!=typeof a.target?a.target:a.srcElement},preventDefault:function(a){"undefined"!=typeof a.preventDefault?a.preventDefault():a.returnValue=!1}},player;player=function(a){function b(a){var b=Math.ceil(Math.random()*Math.pow(10,a));return b}function c(a,b){return 0===a||0===b||isNaN(a)||isNaN(b)?0:(a/b*100).toFixed(2)}function d(a,b,c){return a.replace(new RegExp(b.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),c)}function e(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ","");a.className=d+(c?" "+b:"")}}function f(a,b,c,d){if(b=b.split(" "),a instanceof NodeList)for(var e=0;e<a.length;e++)a[e]instanceof Node&&f(a[e],arguments[1],arguments[2],arguments[3]);else for(var g=0;g<b.length;g++)a[d?"addEventListener":"removeEventListener"](b[g],c,!1)}function g(a,b,c){a&&f(a,b,c,!0)}function h(){var a={supported:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}()};return a}function i(a){function b(a){var b=document.createElement("button"),c=document.createElement("span");return b.type="button",b.className=m.buttonClass+" "+m.buttonComponents[a],c.className=m.screenReaderClass,c.textContent=m.alt[a]+("rewind"==a||"forward"==a?" на "+m.seekTime+"c.":""),b.setAttribute("title",m.buttonComponents[a]),b.appendChild(c),i.cash[a]=b,b}function c(){var a=document.createElement("div"),b=document.createElement("progress"),c=document.createElement("progress"),d=document.createElement("input"),e=document.createElement("label");return a.className=m.seekerComponents.container,c.value=b.value=d.value="0",c.max=b.max=d.max="100",b.className=m.seekerComponents.buffer,b.appendChild(document.createElement("span")),b.appendChild(document.createTextNode(m.alt.buffered)),c.className=m.seekerComponents.played,c.appendChild(document.createElement("span")),c.appendChild(document.createTextNode(m.alt.played)),e.className=m.screenReaderClass,e.htmlFor=d.id="seeForlocalID",e.textContent=m.alt.seek,d.className=m.seekerComponents.seek,d.min="0",d.type="range",d.step="0.5",a.appendChild(e),a.appendChild(d),a.appendChild(c),a.appendChild(b),i.cash.seeker=a,a}function d(a){var b=document.createElement("div"),c=document.createElement("span"),d=document.createElement("span");return c.className=m.screenReaderClass,c.textContent=m.alt[a],d.textContent="00:00",d.className=m.durationComponents[a],b.className=m.durationComponents.timeContainer,b.appendChild(c),b.appendChild(d),i.cash[a]=b,b}function e(){var a=document.createDocumentFragment(),b=document.createElement("label"),c=document.createElement("input"),d=document.createElement("span");return c.className=m.screenReaderClass+" "+m.volumeComponents.inputMute,c.type="checkbox",b.htmlFor=c.id="mutedForlocalID",b.className=m.buttonClass+" "+m.volumeComponents.labelMute,d.textContent=m.alt.muted,d.className=m.screenReaderClass,b.appendChild(d),a.appendChild(c),a.appendChild(b),i.cash.mute=a,a}function f(){var a=document.createDocumentFragment(),b=document.createElement("label"),c=document.createElement("input");return b.className=m.screenReaderClass,b.htmlFor=c.id="volumeForlocalID",b.textContent=m.alt.setVolume,c.className=m.volumeComponents.inputVolume,c.min="0",c.max="10",c.type="range",c.step="0.5",a.appendChild(b),a.appendChild(c),i.cash.volume=a,a}function g(){var a=document.createElement("object");return a.setAttribute("type","image/svg+xml"),a}if(a in i.cash)return i.cash[a];var h=document.createElement("div");switch(h.className="player-controls",a){case"play":case"restart":case"rewind":case"forward":return b(a);case"seeker":return c();case"mute":return e();case"volume":return f();case"timeCurrent":case"timeDuration":return d(a);case"amp":return g();default:return!1}}function j(a){function f(a){return I.container.querySelector("."+a)}function j(){I.media.removeAttribute("controls"),I.media.setAttribute("preload","metadata"),e(I.container,"player-"+I.type,!0)}function o(){m.syncedPlayers||(l=I.container.id,k=I),l&&l===I.container.id?I.media.paused?I.media.play():I.media.pause():l&&l!==I.container.id?(k.media.paused||k.media.pause(),I.media.play()):I.media.play(),m.syncedPlayers&&(l=I.container.id,k=I)}function p(){e(I.container,m.stateClassFor.playing,!I.media.paused),e(I.container,m.stateClassFor.paused,I.media.paused)}function q(){e(I.container,m.stateClassFor.paused,!1),e(I.container,m.stateClassFor.ended,I.media.paused),t()}function r(){t(I.media.currentTime-m.seekTime)}function s(){t(I.media.currentTime+m.seekTime)}function t(a){var b=0;"number"==typeof a?b=a:"object"!=typeof a||"input"!==a.type&&"change"!==a.type||(b=a.target.value/a.target.max*I.media.duration),0>b?b=0:b>I.media.duration&&(b=I.media.duration),I.media.currentTime=b.toFixed(1)}function u(a){var b=I.diagramm.svg.getBoundingClientRect(),c=parseInt((a.clientX-b.left)/(b.right-b.left)*I.media.duration,10);t(c)}function v(a){var b=I.progress.played.bar,d=I.progress.played.text,e=0;if(a)switch(a.type){case"timeupdate":case"seeking":e=c(I.media.currentTime,I.media.duration),"timeupdate"==a.type&&I.buttons.seek&&(I.buttons.seek.value=e),"timeupdate"==a.type&&I.object&&I.diagramm.rectAmp.setAttribute("width",e+"%");break;case"change":case"input":e=a.target.value;case"playing":case"progress":b=I.progress.buffer.bar,d=I.progress.buffer.text,e=function(){var a=I.media.buffered;return a.length?c(a.end(0),I.media.duration):0}()}b&&(b.value=e),d&&(d.innerHTML=e)}function w(a){var b="waiting"===a.type;clearTimeout(I.loadingTimer),I.loadingTimer=setTimeout(function(){e(I.container,m.stateClassFor.loading,b)},b?250:0)}function x(a,b){if(b){I.secs=parseInt(a%60),I.mins=parseInt(a/60%60),I.hours=parseInt(a/60/60%60);var c=parseInt(I.media.duration/60/60%60)>0;I.secs=("0"+I.secs).slice(-2),I.mins=("0"+I.mins).slice(-2),b.innerHTML=(c?I.hours+":":"")+I.mins+":"+I.secs}}function y(){!I.duration&&I.curTime&&x(I.media.duration,I.curTime),I.duration&&x(I.media.duration,I.duration)}function z(a){x(I.media.currentTime,I.curTime),v(a)}function A(a){I.volume&&("undefined"==typeof a&&(a=m.storage.enabled&&h().supported?window.localStorage[m.storage.key]||m.volumeLevel:m.volumeLevel),a>10&&(a=10),I.volume.value=a,I.media.volume=parseFloat(a/10),m.storage.enabled&&h().supported&&window.localStorage.setItem(m.storage.key,a),C(),D(a))}function B(a){"undefined"==typeof a&&(a=!I.media.muted),I.buttons.mute.checked=a,I.media.muted=a,C(),D()}function C(){e(I.container,"muted",0===I.media.volume||I.media.muted)}function D(a){return 0==a?I.buttons.muteLabel.setAttribute("data-volume","volumut"):3>a?I.buttons.muteLabel.setAttribute("data-volume","volumin"):6>a?I.buttons.muteLabel.setAttribute("data-volume","volumid"):I.buttons.muteLabel.setAttribute("data-volume","volumax")}function E(){function a(){var a,b,c,d=document.createElementNS(n,"defs"),e=document.createElementNS(n,"rect"),f=document.createElementNS(n,"clipPath");f.setAttribute("id","cut-off-progress"),e.setAttribute("width","0%"),e.setAttribute("height","100%"),f.appendChild(e),d.appendChild(f),a=I.object.contentDocument.getElementsByTagName("svg")[0],b=a.getElementById("amp"),b.setAttribute("cursor","pointer"),c=b.cloneNode(!0),c.id="progress",c.setAttribute("clip-path","url(#"+f.getAttribute("id")+")"),c.setAttribute("fill",m.colors.main),b.setAttribute("fill",m.colors.unvisible),a.insertBefore(d,b),a.insertBefore(c,b.nextSibling),I.ampState=1}function c(){for(var a in h)if(-1!=j.indexOf(a)){I.configuration=a;for(var b=0;b<h[I.configuration].length;b++){var c=i(h[I.configuration][b]).cloneNode(!0);"amp"!=h[I.configuration][b]?c&&g.appendChild(c):I.container.appendChild(c)}}"amp"==I.configuration&&g.appendChild(f("title")),g.innerHTML=d(g.innerHTML,"localID",e)}var e=b(6),g=document.createElement("div");g.className=m.player_bar;var h=m.playerCustomConfigs,j=I.container.className;if(c(),I.container.insertBefore(g,I.media.nextSibling),I.container.id=e,I.container.hasAttribute("data-musDiagramm")){var k=I.container.getAttribute("data-musDiagramm");I.container.removeAttribute("data-musDiagramm"),I.object=I.container.getElementsByTagName("object")[0],I.object.setAttribute("data",k),I.object.onload=a}}function F(){function a(){I.diagramm={},I.diagramm.svg=I.object.contentDocument.getElementsByTagName("svg")[0],I.diagramm.allAmp=I.diagramm.svg&&I.diagramm.svg.getElementById("amp"),I.diagramm.progressAmp=I.diagramm.svg&&I.diagramm.svg.getElementById("progress"),I.diagramm.rectAmp=I.diagramm.svg&&I.diagramm.svg.querySelector("defs rect")}I.buttons={},I.buttons.play=f(m.buttonComponents.play),I.buttons.restart=f(m.buttonComponents.restart),I.buttons.rewind=f(m.buttonComponents.rewind),I.buttons.forward=f(m.buttonComponents.forward),I.buttons.mute=f(m.volumeComponents.inputMute),I.buttons.muteLabel=f(m.volumeComponents.labelMute),I.buttons.seek=f(m.seekerComponents.seek),I.duration=f(m.durationComponents.timeDuration),I.curTime=f(m.durationComponents.timeCurrent),I.volume=f(m.volumeComponents.inputVolume),I.progress={},I.progress.container=f(m.seekerComponents.container),I.progress.played={},I.progress.played.bar=f(m.seekerComponents.played),I.progress.played.text=I.progress.played.bar&&I.progress.played.bar.getElementsByTagName("span")[0],I.progress.buffer={},I.progress.buffer.bar=f(m.seekerComponents.buffer),I.progress.buffer.text=I.progress.buffer.bar&&I.progress.buffer.bar.getElementsByTagName("span")[0],I.object&&setTimeout(function b(){1==I.ampState?(a(),I.ampState++):setTimeout(b,300)},300)}function G(){var a="input";g(I.buttons.play,"click",o),I.buttons.rewind&&g(I.buttons.rewind,"click",r),I.buttons.restart&&g(I.buttons.restart,"click",t),I.buttons.forward&&g(I.buttons.forward,"click",s),I.duration&&(g(I.media,"loadedmetadata",y),setTimeout(y,2e3)),I.buttons.mute&&g(I.buttons.mute,"change",function(){B(this.checked)}),I.buttons.seek&&g(I.buttons.seek,a,t),I.volume&&g(I.volume,a,function(){A(this.value)}),g(I.media,"progress",v),g(I.media,"playing",v),g(I.media,"waiting canplay seeked",w),g(I.media,"play pause",p),g(I.media,"timeupdate",z),g(I.media,"seeking",z),g(I.media,"ended",q),"video"===I.type&&g(I.media,"click",o),I.object&&setTimeout(function b(){2==I.ampState?(g(I.diagramm.svg,"click",u),I.ampState++):setTimeout(b,300)},300)}function H(){return I.media=I.container.querySelectorAll("audio, video")[0],I.media?(I.type=I.media.tagName.toLowerCase(),j(),E(),F(),A(),G(),!0):!1}var I=this;I.container=a,H()}var k,l,m={player_container:".player",player_bar:"player-controls",buttonClass:"btn",screenReaderClass:"show-for-sr",stateClassFor:{paused:"paused",muted:"muted",playing:"playing",ended:"ended",loading:"loading"},buttonComponents:{restart:"restart",play:"play",rewind:"rewind",forward:"forward"},durationComponents:{timeContainer:"player-time",timeCurrent:"player-current-time",timeDuration:"player-duration"},volumeComponents:{inputVolume:"player-volume",inputMute:"mute",labelMute:"for-mute"},seekerComponents:{container:"player-progress",buffer:"player-progress-buffer",played:"player-progress-played",seek:"player-progress-seek"},seekTime:10,volumeLevel:3,syncedPlayers:!0,storage:{enabled:!0,key:"volumeLevel"},colors:{main:"#512698",second:"#704caa",unvisible:"#665d76"},alt:{play:"Проиграть/Поставить на паузу",restart:"Твоя песня хороша — начинай сначала",rewind:"Перемотать назад",forward:"Перемотать вперед",timeDuration:"Длительность",timeCurrent:"Текущее время",buffered:"% загружено",played:"% проиграно",seek:"Перемотать на: ",setVolume:"Громкость",muted:"Выключить/включить звук"},playerCustomConfigs:{thumb:["play"],amp:["play","amp"],slider:["play","seeker","mute","volume"],video:["seeker","restart","play","rewind","forward","timeCurrent","timeDuration","mute","volume"],"default":["seeker","restart","play","rewind","forward","timeCurrent","timeDuration","mute","volume"]}},n="http://www.w3.org/2000/svg";return i.cash={},a.setup=function(){for(var a=document.querySelectorAll(m.player_container),b=[],c=a.length-1;c>=0;c--){var d=a[c],e=new j(d);d.player=Object.keys(e).length?e:!1,b.push(d)}return b},a}({}),evnt.addEvent(window,"load",player.setup);